webpackJsonp([1],{"/E6+":function(t,e){},CfU7:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("7+uW"),n=r("mtWM"),i=r.n(n),s={props:["offer"],data:function(){return{airlineOffers:!1,sortedOffers:null}},methods:{showOffers:function(){this.airlineOffers=!this.airlineOffers},sortedArray:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return this.offer.offers[0].segments.sort(function(t,e){return t.duration_minutes<e.duration_minutes?-1:t.duration_minutes>e.duration_minutes?1:0})})}},o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"offer"},[r("div",{staticClass:"airline",on:{click:function(e){return e.preventDefault(),t.showOffers(e)}}},[r("div",{staticClass:"airline-logo"},[r("img",{attrs:{width:"100px",height:"50px",src:t.offer.carrier_logo}})]),t._v(" "),r("div",{staticClass:"airline-name"},[t._v(t._s(t.offer.carrier_name))])]),t._v(" "),t.airlineOffers?r("div",{staticClass:"offer-container"},[r("table",[r("tr",[r("th",[t._v("From")]),t._v(" "),r("th",[t._v("To")]),t._v(" "),r("th",[t._v("Arrival date")]),t._v(" "),r("th",[t._v("Departure date")]),t._v(" "),r("th",{staticClass:"sort",on:{click:function(e){return e.preventDefault(),t.sortedArray(e)}}},[t._v("Duration")]),t._v(" "),r("th",[t._v("Price")])]),t._v(" "),r("tbody",t._l(t.offer.offers[0].segments,function(e,a){return r("tr",{key:a},[r("td",[t._v(t._s(e.arrival_airport))]),t._v(" "),r("td",[t._v(t._s(e.departure_airport))]),t._v(" "),r("td",[t._v(t._s(e.arrival_date))]),t._v(" "),r("td",[t._v(t._s(e.departure_date))]),t._v(" "),r("td",[t._v(t._s(e.duration_formated))]),t._v(" "),r("td",[t._v(t._s(e.price_details[0].total))])])}),0)])]):t._e()])},staticRenderFns:[]};var c={data:function(){return{apiLink:"https://api-stage.etm-system.com/api/login/",apiKey:"8e71ac9f18",departure_code:"",arrival_code:"",fly_class:"",date:"",error:"",currency:"",loading:!1,authKey:null,request_id:null,offers:null}},methods:{getAuth:function(){var t=this;i.a.get(this.apiLink+this.apiKey).then(function(e){t.error="",t.currency=e.data.currency,t.locale=e.data.locale,t.authKey=e.data.etm_auth_key}).catch(function(e){t.error="I cant auth"})},search:function(){var t=this;this.loading=!0;var e={"etm-auth-key":this.authKey},r={directions:[{departure_code:this.departure_code,arrival_code:this.arrival_code,date:this.date}],adult_qnt:1,class:this.fly_class,fare_types:["PUB","NEG"]};i.a.post("https://api-stage.etm-system.com/api/air/search",r,{headers:e}).then(function(e){t.request_id=e.data.request_id,t.getOffer()})},getOffer:function(){var t=this,e={"etm-auth-key":this.authKey};i.a.get("https://api-stage.etm-system.com/api/air/offers?request_id="+this.request_id,{headers:e}).then(function(e){"InProcess"==e.data.status?setTimeout(function(){t.getOffer()},1e3):(t.loading=!1,t.offers=e.data.offers)}).catch(function(e){t.error="Some error"})}},mounted:function(){this.getAuth()},components:{Offer:r("VU/8")(s,o,!1,function(t){r("er9W")},null,null).exports}},u={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"search"},[r("div",{staticClass:"input-field"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.departure_code,expression:"departure_code"}],staticClass:"default",attrs:{placeholder:"Departure code"},domProps:{value:t.departure_code},on:{input:function(e){e.target.composing||(t.departure_code=e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.arrival_code,expression:"arrival_code"}],staticClass:"default",attrs:{placeholder:"Arrival code"},domProps:{value:t.arrival_code},on:{input:function(e){e.target.composing||(t.arrival_code=e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"default",attrs:{placeholder:"Date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.fly_class,expression:"fly_class"}],staticClass:"default",attrs:{placeholder:"Class"},domProps:{value:t.fly_class},on:{input:function(e){e.target.composing||(t.fly_class=e.target.value)}}}),t._v(" "),r("div",{staticClass:"error"},[t._v(t._s(t.error))])]),t._v(" "),r("button",{staticClass:"btn btn-search",on:{click:function(e){return e.preventDefault(),t.search(e)}}},[t._v("Search")]),t._v(" "),t.loading?r("div",[t._v("Loading...")]):r("div",t._l(t.offers,function(t,e){return r("Offer",{key:e,attrs:{offer:t}})}),1)])])},staticRenderFns:[]};var l={name:"App",components:{MyTicket:r("VU/8")(c,u,!1,function(t){r("/E6+")},null,null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("MyTicket")],1)},staticRenderFns:[]};var f=r("VU/8")(l,d,!1,function(t){r("CfU7")},null,null).exports;a.a.prototype.$axios=i.a,a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:f},template:"<App/>"})},er9W:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.618ba1ceee85ca8e8180.js.map